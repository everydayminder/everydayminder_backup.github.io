# This is a sample build configuration for Ruby.
# Check our guides at https://confluence.atlassian.com/x/8r-5Mw for more examples.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Docker Hub as your build environment.
image: ruby:2.4.0

pipelines:
  default:
    - step:
        script:
          - git config --global user.email "2jhyun@gmail.com"
          - git config --global user.name "jaehyun kim"
          - gem install jekyll
          - bundle install
          - rm -rf .git
          - git clone https://everydayminder:$credential@github.com/everydayminder/everydayminder.github.io.git _site
          - jekyll build
          - cd _site
          - git add . && git commit -m "New version - $BITBUCKET_COMMIT"
          - git push origin master